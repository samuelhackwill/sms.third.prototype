- - ## T-050B — PixiJS bullet renderer (mount into `/stage`, consume BroadcastChannel)

    ### Goal

    Implement the PixiJS renderer on `/stage`:

    - Bullets moving right→left
    - Lanes + speed randomization
  - Cleanup off-screen
    - Must remain smooth with **50+ concurrent bullets**

    Consumes messages delivered via BroadcastChannel `"stage_test"` from T-050A.

    

    ### Deliverables (files to edit/add)
  
  **Stage renderer module**
  
  - in `stage.js`
      class or factory like `createPixiStage({ mountEl })` with:
      - `start()`, `stop()`, `destroy()`
      - `spawnMessages(messages[])`
      - `clear()`
  
    - Instantiate Pixi in `onRendered`
  - Listen to BroadcastChannel and call `spawnMessages` / `clear`
    - Destroy Pixi in `onDestroyed`

    
  
    ### Renderer spec (same as before, now implementation)
  
    - Pixi `Application`, resize with viewport.
  - Lanes:
      - `FONT_SIZE = 36`
    - `LANE_PADDING = 8`
      - `LANE_HEIGHT = FONT_SIZE + LANE_PADDING`
    - `laneCount = floor(height / LANE_HEIGHT)` min 1
    - Spawn:
      - `x = width + 20`
      - `y = laneIndex * LANE_HEIGHT`
      - speed random `[120, 380]` px/s
    - Update loop:
      - move by `speed * deltaSeconds`
    - Cleanup:
    - remove + destroy when off-screen
    - Text:
    - Prefer `BitmapText` (no emoji requirement in this task)
      - Keep hook for future `PIXI.Text` fallback

    **Optional in this ticket (your call, but fits well here):**
  
    - Per-phone stable bright color mapping.
  
    ### Acceptance checklist

    - `/stage` creates a Pixi canvas inside `#stageCanvasHost`.
  - Admin buttons spawn moving bullets.
    - 50+ concurrent bullets remain smooth over a few minutes.
    - Memory stable (bullets destroyed when off-screen; active count doesn’t grow unbounded).
  - Clear button removes all bullets immediately.
  
  ------
